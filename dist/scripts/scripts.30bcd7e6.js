"use strict";angular.module("blogApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/blogs/:blogId",{templateUrl:"views/blog.html",controller:"BlogCtrl"}).when("/blogs/:blogId/posts/:postId",{templateUrl:"views/blogPost.html",controller:"BlogPostCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"AuthCtrl"}).when("/signup",{templateUrl:"views/signup.html",controller:"AuthCtrl"}).when("/createBlog",{templateUrl:"views/createBlog.html",controller:"BlogCtrl"}).when("/blogs/:blogId/newPost",{templateUrl:"views/createPost.html",controller:"NewBlogPostCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("blogApp").controller("MainCtrl",["$scope","$http",function(a,b){b({method:"GET",url:"/api/index.php/blogs"}).success(function(b){console.log(b),a.blogs=b})}]),angular.module("blogApp").controller("BlogCtrl",["$scope","$http","$routeParams","$location",function(a,b,c,d){b({method:"GET",url:"/api/index.php/blogs/1"}).success(function(b){a.blog=b[0]}),b({method:"GET",url:"/api/index.php/blogs/1/posts"}).success(function(b){a.posts=b}),a.newBlog={},a.doCreate=function(a){console.log(a.title),console.log(a.description),console.log(a.destination),console.log(a);var c=b.post("/api/index.php/newBlog",a);c.success(function(a,b,c,e){d.path("/blogs/"+a.idBlog),console.log(a)})},a.goToNewPost=function(){console.log("hellooo im ehre"),d.path("/blogs/"+a.blog.idBlog+"/newPost")}}]),angular.module("blogApp").controller("BlogPostCtrl",["$scope","$http","$routeParams","$location",function(a,b,c,d){var e="/api/index.php/blogs/"+c.blogId+"/posts/"+c.postId;b({method:"GET",url:e}).success(function(b){a.blogPost=b[0]}),b({method:"GET",url:"/api/index.php/blogs/"+c.blogId}).success(function(b){a.blog=b[0]});var e="/api/index.php/blogs/"+c.blogId+"/posts/"+c.postId+"/comments/";b({method:"GET",url:e}).success(function(b){a.comments=b});var e="/api/index.php/blogs/"+c.blogId+"/posts/"+c.postId+"/images/";b({method:"GET",url:e}).success(function(b){a.images=b,console.log(b)}),a.newComment={},a.doComment=function(e){e.postId=c.postId;var f=(new Date).toISOString().slice(0,19).replace("T"," ");e.DateTime=f;var g=b.post("/api/index.php/newComment",e);g.success(function(b,e,f,g){d.path("/blogs/"+c.blogId+"/posts/"+c.postId),a.newComment={},a.comments.push(b)})},a.direction="left",a.currentIndex=0,a.setCurrentSlideIndex=function(b){a.direction=b>a.currentIndex?"left":"right",a.currentIndex=b},a.isCurrentSlideIndex=function(b){return a.currentIndex===b},a.prevSlide=function(){a.direction="left",a.currentIndex=a.currentIndex<a.images.length-1?++a.currentIndex:0},a.nextSlide=function(){a.direction="right",a.currentIndex=a.currentIndex>0?--a.currentIndex:a.images.length-1}}]).animation(".slide-animation",function(){return{beforeAddClass:function(a,b,c){var d=a.scope();if("ng-hide"==b){var e=a.parent().width();"right"!==d.direction&&(e=-e),TweenMax.to(a,.5,{left:e,onComplete:c})}else c()},removeClass:function(a,b,c){var d=a.scope();if("ng-hide"==b){a.removeClass("ng-hide");var e=a.parent().width();"right"===d.direction&&(e=-e),TweenMax.fromTo(a,.5,{left:e},{left:0,onComplete:c})}else c()}}}),angular.module("blogApp").controller("NewBlogPostCtrl",["$scope","$http","$routeParams","$location",function(a,b,c,d){a.newPost={},a.doCreate=function(e){a.newPost.blogId=c.blogId;var f=(new Date).toISOString().slice(0,19).replace("T"," ");a.newPost.dateTime=f;var g=b.post("/api/index.php/newPost",e);g.success(function(e,f,g,h){if(a.images.length>0){var i;for(i=0;i<a.images.length;++i)a.images[i].postId=e.idPost,b.post("/api/index.php/newImage",a.images[i])}d.path("/blogs/"+c.blogId+"/posts"+e.idPost)})},a.images=[],a.newImage={},a.addImage=function(b){a.images.push({name:a.newImage.name,link:a.newImage.link}),a.newImage.name="",a.newImage.link=""},a.deleteImage=function(b){a.images.splice(b,1)}}]),angular.module("blogApp").controller("AuthCtrl",["$scope","$http","$routeParams",function(a,b,c){a.userName={},a.password={},a.doLogin=function(a){console.log(a.userName),console.log(a.password)},a.userName={},a.password={},a.password2={},a.doSignup=function(a){console.log(a.username),console.log(a.password),console.log(a.password2)},a.logout=function(){}}]);